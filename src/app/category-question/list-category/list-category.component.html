<section class="content-header">
  <h1>
    Dashboard
    <small>Control panel</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
    <li class="active">Dashboard</li>
  </ol>
</section>
<section class="content">
  <div class="box">
    <div class="box-body">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row">
            <div class="col-sm-6">
              <h2>Manage <b>Category</b></h2>
            </div>
            <div class="col-sm-6">
              <a href="#addEmployeeModal" class="btn btn-success" data-toggle="modal"><i
                  class="glyphicon glyphicon-plus-sign"></i>
                <span>Add New Category</span></a>
              <!-- <a href="#deleteEmployeeModal" class="btn btn-danger" data-toggle="modal"><i class="material-icons"></i>
                <span>Delete</span></a> -->
            </div>
          </div>
        </div>
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <!-- <th>
                <span class="custom-checkbox">
                  <input type="checkbox" id="selectAll">
                  <label for="selectAll"></label>
                </span>
              </th> -->
              <th style="width: 30%;">CategoryName</th>
              <th style="width: 10%;">UserIdCreated</th>
              <th style="width: 30%;">DateCreated</th>
              <th style="width: 10%;">Status</th>
              <th style="width: 17.5%;">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor='let category of categorys; let i = index; trackBy: categoryTrackByFn'>
              <td>{{category.categoryName}}</td>
              <td>{{category.userCategory["id"]}}</td>
              <td>{{category.dateCreated | date:'yyy/MM/dd'}}</td>
              <td>{{category.status}}</td>
              <td>
                <a href="#viewEmployeeModal" class="View" data-toggle="modal" style="margin-right: 5px;"
                  (click)="getCategoryForUpdateAndView(category)"><i class="material-icons" data-toggle="tooltip"
                    title="View">&#xe8f4;</i></a>
                <a href="#editEmployeeModal" class="edit" data-toggle="modal" style="margin-right: 5px;"
                  (click)="getCategoryForUpdateAndView(category)"><i class="material-icons" data-toggle="tooltip"
                    title="Edit">&#xE254;</i></a>
                <a href="#deleteEmployeeModal" class="delete" data-toggle="modal" style="margin-right: 5px;"
                  (click)="getCategoryForCreateAndDelete(category)"><i class="material-icons" data-toggle="tooltip"
                    title="Delete">&#xE872;</i></a>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="clearfix">
          <div class="hint-text">Showing <b>5</b> out of <b>25</b> entries</div>
          <ul class="pagination">
            <li class="page-item disabled"><a href="#">Previous</a></li>
            <li class="page-item active"><a href="#" class="page-link">1</a></li>
            <li class="page-item"><a href="#" class="page-link">2</a></li>
            <li class="page-item "><a href="#" class="page-link">3</a></li>
            <li class="page-item"><a href="#" class="page-link">4</a></li>
            <li class="page-item"><a href="#" class="page-link">5</a></li>
            <li class="page-item"><a href="#" class="page-link">Next</a></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Add Modal HTML -->
    <div id="addEmployeeModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <form novalidate [formGroup]="categoryFrm">
            <div class="modal-header">
              <h4 class="modal-title">Add Category</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">

              <div class="form-group">
                <label>categoryName:</label>
                <input type="text" class="form-control" formControlName="categoryName" [ngClass]="{
                  'is-valid': categoryFrm.get('categoryName').valid,
                  'is-invalid': categoryFrm.get('categoryName').invalid
                  && categoryFrm.get('categoryName').touched
                }">
              </div>
              <div *ngIf="categoryFrm.get('categoryName').invalid && categoryFrm.get('categoryName').touched"
                class="alert alert-danger">
                <ng-container *ngIf="categoryFrm.get('categoryName').hasError('required')">
                  categoryName is required
                </ng-container>
                <ng-container *ngIf="categoryFrm.get('categoryName').hasError('minlength')">
                  Min length {{categoryFrm.get('categoryName').getError('minlength').requiredLength}}
                </ng-container>
              </div>


              <div class="form-group">
                <label>userIdCreated:</label>
                <input type="text" class="form-control" formControlName="userIdCreated" [ngClass]="{
                  'is-valid': categoryFrm.get('userIdCreated').valid,
                  'is-invalid': categoryFrm.get('userIdCreated').invalid
                  && categoryFrm.get('userIdCreated').touched
                }">
              </div>
              <div *ngIf="categoryFrm.get('userIdCreated').invalid && categoryFrm.get('userIdCreated').touched"
                class="alert alert-danger">
                <ng-container *ngIf="categoryFrm.get('userIdCreated').hasError('required')">
                  userIdCreated is required
                </ng-container>
              </div>


              <div class="form-group">
                <label>dateCreated:</label>
                <input type="text" class="form-control" 
                  formControlName="dateCreated" 
                  [ngClass]="{
                  'is-valid': categoryFrm.get('dateCreated').valid,
                  'is-invalid': categoryFrm.get('dateCreated').invalid
                  && categoryFrm.get('dateCreated').touched
                }" >
              </div>
              <div *ngIf="categoryFrm.get('dateCreated').invalid && categoryFrm.get('dateCreated').touched"
                class="alert alert-danger">
                <ng-container *ngIf="categoryFrm.get('dateCreated').hasError('required')">
                  dateCreated is required
                </ng-container>
              </div>


              <div class="form-group">
                <label>status:</label>
                <input type="text" class="form-control" formControlName="status" [ngClass]="{
                  'is-valid': categoryFrm.get('status').valid,
                  'is-invalid': categoryFrm.get('status').invalid
                  && categoryFrm.get('status').touched
                }">
              </div>
              <div *ngIf="categoryFrm.get('status').invalid && categoryFrm.get('status').touched"
                class="alert alert-danger">
                <ng-container *ngIf="categoryFrm.get('status').hasError('required')">
                  status is required
                </ng-container>
              </div>

            </div>
            <div class="modal-footer">
              <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
              <input type="submit" class="btn btn-success" value="Add" (click)="onCreate()" data-dismiss="modal">
            </div>
          </form>
        </div>
      </div>
    </div>


    <!-- Edit Modal HTML -->
    <div id="editEmployeeModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <form novalidate [formGroup]="categoryFrm2">
            <div class="modal-header">
              <h4 class="modal-title">Edit Category</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label>categoryName:</label>
                <input type="text" class="form-control" formControlName="categoryName" [ngClass]="{
                      'is-valid': categoryFrm2.get('categoryName').valid,
                      'is-invalid': categoryFrm2.get('categoryName').invalid
                      && categoryFrm2.get('categoryName').touched
                    }">
              </div>
              <div *ngIf="categoryFrm2.get('categoryName').invalid && categoryFrm2.get('categoryName').touched"
                class="alert alert-danger">
                <ng-container *ngIf="categoryFrm2.get('categoryName').hasError('required')">
                  categoryName is required
                </ng-container>
                <ng-container *ngIf="categoryFrm2.get('categoryName').hasError('minlength')">
                  Min length {{categoryFrm2.get('categoryName').getError('minlength').requiredLength}}
                </ng-container>
              </div>


              <div class="form-group">
                <label>userIdCreated:</label>
                <input type="text" class="form-control" formControlName="userIdCreated" [ngClass]="{
                      'is-valid': categoryFrm2.get('userIdCreated').valid,
                      'is-invalid': categoryFrm2.get('userIdCreated').invalid
                      && categoryFrm2.get('userIdCreated').touched
                    }">
              </div>
              <div *ngIf="categoryFrm2.get('userIdCreated').invalid && categoryFrm2.get('userIdCreated').touched"
                class="alert alert-danger">
                <ng-container *ngIf="categoryFrm2.get('userIdCreated').hasError('required')">
                  userIdCreated is required
                </ng-container>
              </div>


              <div class="form-group">
                <label>dateCreated:</label>
                <input type="text" class="form-control"  formControlName="dateCreated" 
                  [ngClass]="{
                  'is-valid': categoryFrm2.get('dateCreated').valid,
                  'is-invalid': categoryFrm2.get('dateCreated').invalid
                  && categoryFrm2.get('dateCreated').touched
                }">
              </div>
              <div *ngIf="categoryFrm2.get('dateCreated').invalid && categoryFrm2.get('dateCreated').touched"
                class="alert alert-danger">
                <ng-container *ngIf="categoryFrm2.get('dateCreated').hasError('required')">
                  dateCreated is required
                </ng-container>
              </div>


              <div class="form-group">
                <label>status:</label>
                <input type="text" class="form-control" formControlName="status" [ngClass]="{
                      'is-valid': categoryFrm2.get('status').valid,
                      'is-invalid': categoryFrm2.get('status').invalid
                      && categoryFrm2.get('status').touched
                    }">
              </div>
              <div *ngIf="categoryFrm2.get('status').invalid && categoryFrm2.get('status').touched"
                class="alert alert-danger">
                <ng-container *ngIf="categoryFrm2.get('status').hasError('required')">
                  status is required
                </ng-container>
              </div>
            </div>
            <div class="modal-footer">
              <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
              <input type="submit" class="btn btn-success" value="Save" *ngIf="category1" (click)="updateCategory()"
                data-dismiss="modal">
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- View Modal HTML -->
    <div id="viewEmployeeModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <form novalidate [formGroup]="categoryFrm2">
            <div class="modal-header">
              <h4 class="modal-title">View Category</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label>categoryName:</label>
                <input type="text" class="form-control" formControlName="categoryName" disabled="true">
              </div>
              <div class="form-group">
                <label>userIdCreated:</label>
                <input type="text" class="form-control" formControlName="userIdCreated" disabled="true">
              </div>
              <div class="form-group">
                <label>dateCreated:</label>
                <!-- <textarea class="form-control" formControlName="dateCreated" disabled="true"></textarea> -->
                <input type="text" class="form-control" formControlName="dateCreated" disabled="true">
              </div>
              <div class="form-group">
                <label>status:</label>
                <input type="text" class="form-control" formControlName="status" disabled="true">
              </div>
            </div>
            <div class="modal-footer">
              <input type="button" class="btn btn-success" data-dismiss="modal" value="Cancel">
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Delete Modal HTML -->
    <div id="deleteEmployeeModal" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-content">
          <form novalidate>
            <div class="modal-header">
              <h4 class="modal-title">Delete Employee</h4>
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
              <p>Are you sure you want to delete these Recordsma?</p>
              <p class="text-warning"><small>This action cannot be undone.</small></p>
            </div>
            <div class="modal-footer">
              <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
              <input type="submit" class="btn btn-danger" value="Delete" *ngIf="category1"
                (click)="deleteCategory(category1)" data-dismiss="modal">
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="box-footer">
      Footer
    </div>
  </div>
</section>